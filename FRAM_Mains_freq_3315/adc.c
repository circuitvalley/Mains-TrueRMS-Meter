/*
 * adc.c
 *
 *  Created on: Dec 26, 2014
 *      Author: Gaurav
 */

#include "adc.h"
#include <msp430.h>

void initADC()
{
	REFCTL0 = REFVSEL0 | REFVSEL1 | REFON;  /* reference control set to 2.5V and turn it on*/
	ADC12CTL1 = ADC12SHP | ADC12DIV0 | ADC12DIV1 | ADC12SSEL1 |ADC12CONSEQ1 | ADC12CONSEQ0 | ADC12SHS_4 ; // ADC12SHP sampling timer,ADC12DIV0 | ADC12DIV1 clock /4 DC12SSEL1 mclk ADC12CONSEQ rep single channel conversion
	ADC12CTL2 = ADC12RES1 ; //set 12 bit conversion
	ADC12MCTL0 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL1 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL2 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL3 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL4 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL5 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL6 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL7 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL8 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL9 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL10 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL11 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL12 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL13 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL14 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL15 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL16 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL17 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL18 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL19 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL20 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL21 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL22 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL23 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL24 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL25 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL26 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL27 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL28 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL29 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL30 = ADC12VRSEL0 | ADC12INCH_7; // REFERENCE AND CHANNEL 7
	ADC12MCTL31 = ADC12VRSEL0 | ADC12INCH_7 | ADC12EOS; // REFERENCE , CHANNEL 7 and this the last channel of the squence

	ADC12IER1 = ADC12IE31 ; 							// interrupt on 31th buffer flag ADC12IFG31 in ADC12IFGR1
	ADC12CTL0 = ADC12SHT11 | ADC12SHT13 | ADC12SHT01 | ADC12SHT03 | ADC12ON ;
	START_ADC_SAMPLING;
}

